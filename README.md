# H5Spec - H5 项目研发工作流

基于 SDD（Software Design Document）和 AC（Acceptance Criteria）的 H5 项目研发范式，提供结构化的开发工作流。

## 简介

H5Spec 是一套专为 H5 项目设计的 Claude Code 自定义命令集，涵盖了从代码探索、项目初始化、方案设计、任务拆分到代码实现的完整研发流程。

## 适用场景

### 1. 历史项目的日常迭代
- 理解存量代码库
- 需求分析
- 技术设计 & UI 设计
- Coding 研发
- 测试回归
- 发布

### 2. 历史项目的版本升级
- 理解存量代码库
- 梳理重构方案
- 技术设计 & UI 设计
- Coding 研发
- 测试回归
- 发布

### 3. 新起项目的需求研发
- 梳理业务需求逻辑
- 技术方案设计
- UI 设计
- Coding 研发
- 测试回归
- 发布

## 命令列表

### `/h5spec:explore` - 探索代码库
探索和分析现有的 H5 项目代码库，生成详细的探索报告。

**功能：**
- 使用 Task 工具深入探索代码库
- 分析项目结构和技术栈
- 识别关键模块和组件
- 评估代码质量和技术债务
- 生成结构化的探索报告

**使用示例：**
```bash
/h5spec:explore
```

**适合场景：**
- 接手新项目，快速了解代码结构
- 版本升级前的现状评估
- 日常迭代前理解存量代码

---

### `/h5spec:init` - 初始化项目规范
为新项目或重构项目初始化完整的技术规范和开发配置。

**功能：**
- 分析项目需求，确定技术栈
- 设计标准化的目录结构
- 配置开发工具（ESLint、Prettier、TypeScript）
- 制定代码规范和 Git 规范
- 生成项目初始化文档

**使用示例：**
```bash
# 基础使用
/h5spec:init

# 指定技术栈
/h5spec:init 使用 Vue3 + TypeScript + Vite 搭建移动端 H5 项目

# 指定组件库
/h5spec:init 使用 React + Ant Design Mobile 搭建项目
```

**适合场景：**
- 新项目启动
- 历史项目重构
- 统一团队开发规范

---

### `/h5spec:design` - 设计技术方案和 UI
设计完整的技术实现方案、UI 界面和交互流程，输出 SDD 文档。

**功能：**
- 理解和分析业务需求
- 设计技术架构和实现方案
- 设计 UI 界面和视觉规范
- 设计交互流程和状态转换
- 设计数据结构和 API 接口
- 输出完整的设计文档（SDD）

**使用示例：**
```bash
# 功能设计
/h5spec:design 设计手机号 + 验证码登录功能

# 详细描述
/h5spec:design 设计商品列表页，支持搜索、筛选、排序，包含 UI 设计和技术方案

# 重构设计
/h5spec:design 重构用户中心页面，优化性能和用户体验
```

**适合场景：**
- 新功能开发前的方案设计
- UI/UX 设计
- 重构方案设计
- 技术评审前的文档准备

---

### `/h5spec:task` - 拆分开发任务
将设计方案拆分为可执行的开发任务，使用 TodoWrite 工具跟踪进度。

**功能：**
- 分析设计方案，识别功能模块
- 按 SMART 原则拆分任务
- 评估工作量和优先级
- 明确任务依赖关系
- 使用 TodoWrite 创建任务列表
- 生成详细的任务清单文档

**使用示例：**
```bash
# 基于设计文档拆分
/h5spec:task

# 指定功能拆分
/h5spec:task 将用户登录功能拆分为开发任务

# 拆分重构任务
/h5spec:task 拆分商品列表页重构任务
```

**适合场景：**
- 开发前的任务规划
- 迭代计划制定
- 工作量评估
- 进度跟踪

---

### `/h5spec:coding` - 编写代码实现
根据任务清单，编写符合规范的高质量代码。

**功能：**
- 确认任务需求和验收标准
- 阅读相关代码和设计文档
- 编写符合规范的代码
- 提供完整的类型定义
- 实现错误处理和边界情况
- 自测功能并更新任务状态

**使用示例：**
```bash
# 实现组件
/h5spec:coding 实现手机号输入组件，支持格式校验和自动分隔

# 实现功能
/h5spec:coding 实现登录页面，对接验证码登录接口

# 修复 Bug
/h5spec:coding 修复列表页滚动加载的性能问题
```

**适合场景：**
- 功能模块开发
- 组件实现
- Bug 修复
- 代码重构

---

## 完整工作流示例

### 场景：开发用户登录功能

#### 1. 如果是历史项目，先探索代码库
```bash
/h5spec:explore
```

*输出：项目结构、技术栈、现有登录相关代码分析*

#### 2. 如果是新项目，初始化规范
```bash
/h5spec:init 使用 Vue3 + TypeScript + Vite 搭建移动端 H5 项目
```

*输出：目录结构、配置文件、开发规范文档*

#### 3. 设计技术方案和 UI
```bash
/h5spec:design 设计手机号 + 验证码登录功能，包含 UI 界面和技术方案
```

*输出：完整的 SDD 文档，包含 UI 设计、交互流程、技术方案、API 接口设计*

#### 4. 拆分开发任务
```bash
/h5spec:task 将登录功能拆分为开发任务
```

*输出：详细的任务清单，包含工作量评估、优先级、依赖关系*

#### 5. 按任务编写代码
```bash
# 任务 1：实现手机号输入组件
/h5spec:coding 实现手机号输入组件，支持格式校验和自动分隔显示

# 任务 2：实现验证码输入组件
/h5spec:coding 实现验证码输入组件，6位数字，支持倒计时

# 任务 3：实现登录页面
/h5spec:coding 实现登录页面，整合手机号和验证码组件，对接登录接口

# ... 依次完成所有任务
```

*输出：高质量的代码实现，自动更新任务状态*

---

## 工作原则

### 核心原则
1. **规范优先**：严格遵循项目规范，不得随意偏离
2. **事实为准**：基于真实代码和需求，不臆测
3. **质量优先**：代码质量比开发速度更重要
4. **文档完善**：每个阶段都输出清晰的文档

### 开发规范
1. **禁止硬编码**：使用配置文件或环境变量
2. **类型安全**：使用 TypeScript，确保类型完整
3. **错误处理**：所有异步操作必须有错误处理
4. **代码可读**：有意义的命名，适当的注释
5. **自测充分**：提交前必须自测通过

### 任务管理
1. **主动创建 TODO**：复杂任务必须使用 TodoWrite
2. **及时更新状态**：开始任务标记 in_progress，完成标记 completed
3. **透明化进度**：向用户展示任务进度

---

## 技术栈支持

### 前端框架
- Vue 3 + TypeScript
- React + TypeScript
- Taro / uni-app（跨平台）
- 原生 JavaScript

### 构建工具
- Vite（推荐）
- Webpack
- Turbopack

### UI 组件库
- Vant（移动端 Vue）
- Ant Design Mobile（移动端 React）
- NutUI（京东移动端）
- 自研组件

### 样式方案
- Less / Sass
- UnoCSS / Tailwind CSS
- CSS Modules
- Styled-components

### 状态管理
- Pinia（Vue 3 推荐）
- Vuex
- Zustand（React）
- Redux

---

## 目录结构示例

```
project-name/
├── .vscode/                  # VS Code 配置
├── public/                   # 静态资源
├── src/
│   ├── api/                  # API 接口
│   │   ├── modules/
│   │   └── request.ts
│   ├── assets/               # 资源文件
│   │   ├── images/
│   │   └── styles/
│   ├── components/           # 公共组件
│   │   ├── common/
│   │   └── business/
│   ├── composables/          # 组合式函数 (Vue)
│   ├── hooks/                # 自定义 Hooks (React)
│   ├── layouts/              # 布局组件
│   ├── pages/                # 页面组件
│   ├── router/               # 路由配置
│   ├── store/                # 状态管理
│   ├── types/                # TypeScript 类型
│   ├── utils/                # 工具函数
│   ├── config/               # 配置文件
│   ├── App.vue
│   └── main.ts
├── tests/                    # 测试文件
├── .env.development
├── .env.production
├── .eslintrc.js
├── .prettierrc.js
├── tsconfig.json
├── vite.config.ts
└── package.json
```

---

## 贡献

欢迎提出改进建议或贡献新的命令！

## 许可证

MIT
